<form action="<?php echo _url('extension', 'configure', 'e', urlencode($this->getName())); ?>" method="post">
	<input type="hidden" name="_csrf" value="<?php echo FreshRSS_Auth::csrfToken(); ?>" />
	<div class="form-group">
		<label class="group-name" for="openai_base_url"><?php echo _t('ext.field.openai_base_url'); ?></label>
		<div class="group-controls">
			<input type="text" name="openai_base_url" id="openai_base_url" value="<?php echo FreshRSS_Context::$system_conf->openai_base_url ?? 'https://api.openai.com'; ?>">
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="openai_api_key"><a href="https://platform.openai.com/account/api-keys" target="_blank"><?php echo _t('ext.field.openai_api_key') . " (?)"; ?></a></label>
		<div class="group-controls">
			<input type="text" name="openai_api_key" id="openai_api_key" value="<?php echo FreshRSS_Context::$system_conf->openai_api_key ?? ''; ?>">
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="max_tokens"><a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-max_tokens" target="_blank"><?php echo _t('ext.field.max_tokens') . " (?)"; ?></a></label>
		<div class="group-controls">
			<input type="range" name="max_tokens" id="max_tokens" min="7" max="4096" value="<?php echo FreshRSS_Context::$system_conf->max_tokens ?? 2048; ?>">
			<output for="max_tokens"><?php echo FreshRSS_Context::$system_conf->max_tokens ?? 2048; ?></output>
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="temperature"><a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-temperature" target="_blank"><?php echo _t('ext.field.temperature') . " (?)"; ?></a></label>
		<div class="group-controls">
			<input type="range" name="temperature" id="temperature" min="0" max="2" step="0.1" value="<?php echo FreshRSS_Context::$system_conf->temperature ?? 1.0; ?>">
			<output for="temperature"><?php echo FreshRSS_Context::$system_conf->temperature ?? 1.0; ?></output>
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="field"><?php echo _t('ext.field.field'); ?></label>
		<div class="group-controls">
			<select name="field" id="field">
				<option value="<?php echo htmlentities(FreshRSS_Context::$system_conf->field ?? 'content'); ?>" selected="selected"><?php echo htmlentities(FreshRSS_Context::$system_conf->field ?? 'content'); ?></option>
				<option value="title">title</option>
				<option value="content">content</option>
			</select>
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="limit"><?php echo _t('ext.field.limit'); ?></label>
		<div class="group-controls">
			<input type="number" name="limit" id="limit" value="<?php echo FreshRSS_Context::$system_conf->limit ?? 30; ?>">
		</div>
	</div>
	<div class="form-group">
		<label class="group-name" for="prompt"><a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-content" target="_blank"><?php echo _t('ext.field.prompt') . " (?)"; ?></a></label>
		<div class="group-controls">
			<textarea id="prompt" name="prompt" rows="4" cols="50"><?php echo FreshRSS_Context::$system_conf->prompt ?? "
			!IMPORTANT! FILTER AND OMIT ANY ARTICLES ABOUT SALES, DISCOUNTS, OR PROMOTIONS! If one of the articles you are sent is for a discount, sale, or advertisement then ignore it. 

			Summarize this as you are news blogger, allowing the reader to get important information without having to read the whole article. 
			Be efficient in your summarizing, and organize your response for optimal readability. 
			Similar topics and categories should be grouped together. 
			Each topic should be clearly labeled before its summary. 
			Within the same topic, group articles from the same site. 
			
			IMPORTANT RULES!: ADHERE TO BOTH THE FORMATTING AND ARTICLE RULES
			
			FORMATTING RULES:
			Use Markdown format for the output. 
			
			Structure:
			1. Create 1 or more topics, as needed, to group the articles
			2. Start with a main heading for the topic.
			3. Separate sections with horizontal lines.
			4. List articles under website headings.
			5. Within each topic, group articles under the same site. Each site should be only listed once per topic, with all articles from that site for that topic below it.
			6. Format each article title as a clickable link.
			7. Provide a brief summary for each article 2-3 sentence summaries are preferred to balance detail and efficiency. 
			8. Only provide information from the article or otherwise proven information.  
			
			Formatting Details:
			- Newlines are represented in the format example as \n (double newline is \n\n) 
			- For main headings, use a single '#' symbol.
			- Use a horizontal line (___) to contain the items within topics, and all topics should end with this line as well. See format example below. 
			- For website headings, use '##' followed by the website name in italics.
			- Format article titles as clickable links using markdown link syntax and highlight them in bold with double asterisks (e.g. **example**).
			- Follow each linked title with a brief summary.
			- Italicize the summaries to differentiate them from the headlines by wrapping them with single asterisks (e.g. *example* )
			- Use `+` symbol for lists. Do not use `-` or `*` to denote lists
			
			Example contained in snippet below (exclude ```):
			
			```
			# GENERALTOPIC 
			\n\n
			___ 
			\n\n
			+ ## *WEBSITE* 
			\n 
				+ **[ARTICLE TITLE](ARTICLE LINK)** 
			\n
					+ *ARTICLE SUMMARY* 
			\n
				+ **[ANOTHER ARTICLE TITLE](ARTICLE LINK)** 
			\n 
					+ *ANOTHER ARTICLE SUMMARY* 
			\n\n
			___ 
			\n\n
			[Repeat for each GENERALTOPIC]
			```
			
			Note: Adhere to this structure. Replace 'GENERALTOPIC', 'WEBSITE', 'ARTICLE TITLE', 'ARTICLE LINK', and 'ARTICLE SUMMARY' with the relevant information.
			
			IMPORTANT ARTICLE RULES: DELETE ANY SUMMARIES FOR SALES OR DISCOUNTS! DO NOT PRESENT THESE TO THE USER UNDER ANY CIRCUMSTANCE!"; ?></textarea>
		</div>
	</div>
	<div class="form-group">
		<!-- Use select element for model selection -->
		<label class="group-name" for="model"><a href="https://platform.openai.com/docs/api-reference/chat/create#chat/create-model" target="_blank"><?php echo _t('ext.field.model') . " (?)"; ?></a></label>
		<div class="group-controls">
			<select id="model" name="model">
				<option value="gpt-4-1106-preview" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-4-1106-preview' ? 'selected' : ''); ?>>gpt-4-1106-preview</option>
				<option value="gpt-4" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-4' ? 'selected' : ''); ?>>gpt-4</option>
				<option value="gpt-4-0613" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-4-0613' ? 'selected' : ''); ?>>gpt-4-0613</option>
				<option value="gpt-4-32k" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-4-32k' ? 'selected' : ''); ?>>gpt-4-32k</option>
				<option value="gpt-4-32k-0613" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-4-32k-0613' ? 'selected' : ''); ?>>gpt-4-32k-0613</option>
				<option value="gpt-3.5-turbo" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-3.5-turbo' ? 'selected' : ''); ?>>gpt-3.5-turbo</option>
				<option value="gpt-3.5-turbo-1106" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-3.5-turbo-1106' ? 'selected' : ''); ?>>gpt-3.5-turbo-1106</option>
				<option value="gpt-3.5-turbo-0613" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-3.5-turbo-0613' ? 'selected' : ''); ?>>gpt-3.5-turbo-0613</option>
				<option value="gpt-3.5-turbo-16k" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-3.5-turbo-16k' ? 'selected' : ''); ?>>gpt-3.5-turbo-16k</option>
				<option value="gpt-3.5-turbo-16k-0613" <?php echo (FreshRSS_Context::$system_conf->model == 'gpt-3.5-turbo-16k-0613' ? 'selected' : ''); ?>>gpt-3.5-turbo-16k-0613</option>
			</select>
		</div>
	</div>
	<div class="form-group form-actions">
		<div class="group-controls">
			<button type="submit" class="btn btn-important"><?php echo _t('gen.action.submit'); ?></button>
			<button type="reset" class="btn"><?php echo _t('gen.action.cancel'); ?></button>
		</div>
	</div>
</form>